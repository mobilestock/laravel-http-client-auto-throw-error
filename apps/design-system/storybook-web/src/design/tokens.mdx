import { Meta } from '@storybook/blocks'

<Meta title="Design/Design Tokens" />

# Design Tokens

<h2 style={{ borderBottom: 'none' }}>Sumario</h2>- [Objetivo](#objetivo) - [Regras](#regras) - [Estrutura do
Arquivo](#estrutura-do-arquivo) - [Exemplo Prático](#exemplo-prático)

# Objetivo

Padronizar o uso e a estrutura das cores em todos os projetos frontend, tornando o processo mais intuitivo e organizado.

# Regras

## Idioma Padrão

Todas as cores e arquivos devem ser nomeados em inglês.

## Validação de Cores

- Novas cores devem passar por uma ferramenta interna (IdentificadorDeCor, no repositório utilidades) que determina a luminosidade e define o número correspondente no arquivo de cores padrão. Esta ferramenta, usa o próprio contexto pra definir a cor e luminosidade da HEX recebida. Na prática, isso significa que o gray95 de uma aplicação, nem sempre vai ser igual ao gray95 da outra.
- Algumas cores possuem uma HEX com mais de 6 caracteres. Isso significa que elas tem um certo nível de transparencia. Neste caso, é necessário converter a HEX para RGBA, para descobrir qual o alfa dessa cor e inseri-lo no nome da mesma. `red38` por exemplo, se tornaria `red38A20` -> `rgba(181, 13, 72, 0.2)`

## Arquivos de Cores

Cada aplicação deve ter um arquivo que armazena suas cores (`defaultColors`), seguindo uma estrutura base padrão que pode ser estendida conforme necessário. Também deve ter um arquivo (`theme`), que é responsável por definir um contexto para cada cor, e também tem sua estrutura padrão.

## Criação de Novas Cores

- A criação de novas cores deve ser evitada. Priorize o uso das cores existentes.
- Caso seja necessário adicionar uma nova cor (por exemplo, para o fundo de um container), ela deve ser adicionada no `defaultColors` e referenciada no `theme`.
- O arquivo `defaultColors` **NUNCA** deve ser chamado diretamente em outros arquivos além do `theme`.

# Estrutura do Arquivo

Essa devera ser a estrutura padrao para qualquer aplicação frontend em nosso sistema.

```txt
 styles (ou utils)
 ├─defaultColors.ts
 └─theme.ts
```

## Arquivo defaultColors

- O arquivo `defaultColors` deve conter as cores base padrão da aplicação.
  Ele pode ser estendido com cores adicionais conforme a necessidade.
- Todas as cores devem usar o padrão HEX. Se necessário, use ferramentes de conversão para mudar de RGB para HEX.
- Todas as HEX devem ser preenchidas em caixa alta.
- As cores adicionais devem ser sempre ordenadas em ordem alfabética.
  Exemplo:

```ts
// defaultColors.ts
export default {
  // Cores base padrão
  primary: '#029AFA',
  secondary: '#00B600',
  tertiary: '#BD0E0E',
  default: '#303F9F',
  shadow: '#00000040',
  outline: '#C0C0C0C0',

  // Cores adicionais necessárias para a aplicação

  green40: '#0CB536',
  orangeRed50: '#F56200',
  red38: '#B50D48',
  red38A20: '#B50D4833'
  red50: '#FF0000',
  white50: '#EEEBEB',
  yellow20: '#FFC700'

}
```

## Arquivo theme

- O arquivo de tema (`theme`) é responsável por referenciar as cores do `defaultColors` e organizá-las em contextos
  específicos de uso, como botões, alertas, superfícies, etc.
- Este arquivo NUNCA deve se referir a uma cor diretamente. Seja pela HEX, RGB ou nome, a não ser que ela venha do `defaultColors`
- Exemplo:

```ts
// theme.ts
import defaultColors from './defaultColors'

export default {
  colors: {
    text: {
      default: defaultColors.black,
      contrast: defaultColors.white,
    },
    container: {
      default: defaultColors.gray82,
      shadow: defaultColors.shadow,
      outline: defaultColors.gray96,
    },
    button: {
      default: defaultColors.primary,
      confirm: defaultColors.green45,
      cancel: defaultColors.red48,
    },
    input: {
      default: defaultColors.white,
      error: defaultColors.red38A20,
    },
    alert: {
      success: defaultColors.green34,
      tip: defaultColors.yellow50,
      warning: defaultColors.orange48,
      urgent: defaultColors.red48,
    },
  },
}
```

## Como usar

Para usar uma cor no CSS, utilize a sintaxe do tema. Exemplo:

```jsx
const Button = styled.button`
  background-color: ${({ theme }) => theme.colors.button.confirm};
`
```

# Exemplo Prático

Se precisar de uma nova cor clara para um container, adicione no `defaultColors` e defina no `theme`:

```ts
// defaultColors.ts
export default {
  // Cores base padrão
  primary: '#029AFA',
  secondary: '#00B600',
  tertiary: '#BD0E0E',
  default: '#303F9F',
  shadow: '#00000040',
  outline: '#C0C0C0C0',

  // Cores adicionais necessárias para a aplicação

  gray95: '#F5F5F5', // Defina neste arquivo sua nova cor.
  green40: '#0CB536',
  orangeRed50: '#F56200',
  red38: '#B50D48',
  red38A20: '#B50D4833',
  red50: '#FF0000',
  white50: '#EEEBEB',
  yellow20: '#FFC700',
}
```

```ts
// theme.ts
import defaultColors from './defaultColors'

export default {
  colors: {
    text: {
      default: defaultColors.black,
      contrast: defaultColors.white,
    },
    container: {
      default: defaultColors.gray82,
      alternative: defaultColors.gray95, //aqui seria o novo contexto
      shadow: defaultColors.shadow,
      outline: defaultColors.gray96,
    },
    button: {
      default: defaultColors.primary,
      confirm: defaultColors.green45,
      cancel: defaultColors.red48,
    },
    input: {
      default: defaultColors.white,
      error: defaultColors.red38A20,
    },
    alert: {
      success: defaultColors.green34,
      tip: defaultColors.yellow50,
      warning: defaultColors.orange48,
      urgent: defaultColors.red48,
    },
  },
}
```

Assim, para dar cor ao seu container, você alimentaria o CSS da seguinte forma

```jsx
const Container = styled.div`
  background-color: ${({ theme }) => theme.colors.container.alternative};
`
```

## Extensão vscode

Foi criada juntamente com a estrutura, uma extensão no vscode com o objetivo de facilitar o acesso às cores.

- Ao digitar `theme.` , ele começar a sugerir as propriedades dentro do objeto theme. Se na camada acessada ele encontrar uma cor, exibirá sua prévia como no print abaixo.
- Ao selecionar a cor desejada, uma prévia também será exibida ao lado do objeto acessado.

![preview do objeto](previewObject.png)
![preview selecionado](previewSelect.png)

### Como funciona?

No arquivo settings.json, tem uma variável que recebe o caminho do(s) arquivo(s) theme.ts do projeto que deverá vir preenchida corretamente por padrão, mas permite ser alterada.
Ao acessar um projeto com arquivos typescript, ela irá compilar os arquivos theme e defaultColors na pasta temporária do seu sistema. Assim, quando você acessar o objeto `theme.`em um arquivo typescript, ele percorrerá o objeto recursivamente para calcular as prévias de cor.
